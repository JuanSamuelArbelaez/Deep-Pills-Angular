{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet Home = class Home {\n  constructor(title, meta, registrationService, authService, tokenService, router) {\n    this.title = title;\n    this.meta = meta;\n    this.registrationService = registrationService;\n    this.authService = authService;\n    this.tokenService = tokenService;\n    this.router = router;\n    this.raw3ezg = ' ';\n    this.raweyu2 = ' ';\n    this.title.setTitle('Deep Pills');\n    this.meta.addTags([{\n      property: 'og:title',\n      content: 'Deep Pills'\n    }]);\n  }\n  onRegister(email, personalId, password, passwordConfirm) {\n    if (password != passwordConfirm) {\n      console.log('Passwords do not match.');\n      alert('Passwords do not match.');\n      return;\n    }\n    this.registrationService.register({\n      email,\n      personalId,\n      password\n    }).subscribe(response => {\n      console.log('Registration successful, redirecting to auth.', response);\n      this.authService.login(email, password).subscribe(response => {\n        console.log('Auth successful', response);\n        this.tokenService.setToken(response.message.token);\n        const userInfo = this.tokenService.login(response.message.token);\n        switch (userInfo.role) {\n          case 'patient':\n            alert('Loggin Succesfull: redirecting to DashBoard');\n            console.log('to dashboard', response.message.token);\n            this.router.navigate(['/patient-dashboard']);\n            break;\n          default:\n            console.error('Unsoported Role:', userInfo.role);\n            alert('Unsoported Role:' + userInfo.role);\n        }\n      }, error => {\n        alert('Auth error' + error.error.message);\n        console.error('Auth error', error.error.message);\n      });\n    }, error => {\n      alert('Registration error' + error.error.message);\n      console.error('Registration error', error.error.message);\n    });\n  }\n};\nHome = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: 'home.component.html',\n  styleUrls: ['home.component.css']\n})], Home);\nexport { Home };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}